<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Tracker 2025 - Finners Daily</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- CSS STYLING (DARK MODE) --- */
        :root {
            /* Skema Warna Dark Mode */
            --primary: #8C9EFF; /* Biru/Ungu Cerah (Saldo & Utama) */
            --success: #3DDC84; /* Hijau Mint (Pemasukan) */
            --danger: #FF6B6B; /* Merah Terang (Pengeluaran) */
            --bg: #1A1A2E; /* Latar Belakang Sangat Gelap */
            --card-bg: #2C2C4E; /* Latar Belakang Kartu Gelap */
            --text-light: #E0E0FF; /* Teks Utama Cerah */
            --text-muted: #B0B0C4; /* Teks Sekunder/Pudar */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { 
            background-color: var(--bg); 
            color: var(--text-light); /* Warna teks utama jadi terang */
            padding: 20px; 
        }
        .container { max-width: 1000px; margin: 0 auto; }

        /* HEADER & LOGO */
        header {
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 15px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.3); /* Shadow lebih gelap */
            margin-bottom: 20px;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        .app-title-section {
            display: flex;
            align-items: center;
            gap: 10px; 
        }
        .app-logo {
            height: 120px; 
            width: auto; 
        }
        h1 { font-size: 2rem; color: var(--primary); }
        select { 
            padding: 8px 12px; 
            border-radius: 8px; 
            border: 1px solid #444; 
            cursor: pointer; 
            background: var(--bg); 
            color: var(--text-light);
        }

        /* CARDS */
        .cards-grid {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            margin-bottom: 20px;
        }
        @media (max-width: 600px) { .cards-grid { grid-template-columns: 1fr; } }
        
        .card {
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 15px;
            text-align: center; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-3px); }

        .card h3 { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 5px; }
        .card p { font-size: 1.3rem; font-weight: 600; }
        .c-in { color: var(--success); }
        .c-out { color: var(--danger); }
        .c-bal { color: var(--primary); }

        /* MAIN CONTENT */
        .content-grid {
            display: grid; 
            grid-template-columns: 1.2fr 0.8fr; 
            gap: 20px;
        }
        @media (max-width: 768px) { .content-grid { grid-template-columns: 1fr; } }

        .box {
            background: var(--card-bg); 
            padding: 25px; 
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
            margin-bottom: 20px;
        }
        .box h2 { 
            border-bottom: 1px solid #444; 
            padding-bottom: 10px; 
            margin-bottom: 20px; 
            font-size: 1.1rem; 
            color: var(--text-light);
        }

        /* FORM */
        .form-row { display: flex; gap: 10px; }
        input, select.full { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            margin-bottom: 10px; 
            background: var(--bg); 
            color: var(--text-light);
        }
        button.btn-save {
            width: 100%; 
            padding: 12px; 
            background: var(--primary); 
            color: #1A1A2E; 
            border: none; 
            border-radius: 8px; 
            font-weight: 600; 
            cursor: pointer;
            transition: background 0.2s;
        }
        button.btn-save:hover { background: #B0BFFF; }

        /* LIST */
        ul { list-style: none; max-height: 350px; overflow-y: auto; }
        li {
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            padding: 10px 0; 
            border-bottom: 1px solid #3A3A5E; 
        }
        li:last-child { border: none; }
        .li-left h4 { font-size: 0.9rem; color: var(--text-light); }
        .li-left span { font-size: 0.75rem; color: var(--text-muted); }
        .btn-del {
            margin-left: 10px; 
            background: #4E2C2C; 
            color: var(--danger); 
            border: none;
            padding: 5px 8px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 0.7rem;
            transition: background 0.2s;
        }
        .btn-del:hover { background: #603838; }

        /* CHART */
        .chart-wrap { position: relative; height: 300px; width: 100%; }

        /* FOOTER/COPYRIGHT STYLING */
        footer {
            margin-top: 30px;
            padding: 15px;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid #3A3A5E;
        }
    </style>
</head>
<body onload="initApp()">

<div class="container">
    <header>
        <div class="app-title-section">
            <img src="finners-daily-logo.png" alt="Finners Daily Logo" class="app-logo">
            <h1 style="color:var(--primary)">Financial Daily Trackers</h1>
        </div>
        <select id="monthSelect" onchange="renderApp()">
            <option value="0">Januari 2025</option>
            <option value="1">Februari 2025</option>
            <option value="2">Maret 2025</option>
            <option value="3">April 2025</option>
            <option value="4">Mei 2025</option>
            <option value="5">Juni 2025</option>
            <option value="6">Juli 2025</option>
            <option value="7">Agustus 2025</option>
            <option value="8">September 2025</option>
            <option value="9">Oktober 2025</option>
            <option value="10">November 2025</option>
            <option value="11">Desember 2025</option>
        </select>
    </header>

    <div class="cards-grid">
        <div class="card">
            <h3>Total Pemasukan</h3>
            <p class="c-in" id="totalIncome">Rp 0</p>
        </div>
        <div class="card">
            <h3>Total Pengeluaran</h3>
            <p class="c-out" id="totalExpense">Rp 0</p>
        </div>
        <div class="card">
            <h3>Sisa Saldo</h3>
            <p class="c-bal" id="totalBalance">Rp 0</p>
        </div>
    </div>

    <div class="content-grid">
        <div>
            <div class="box">
                <h2>‚ûï Tambah Transaksi</h2>
                <form onsubmit="addTransaction(event)">
                    <div class="form-row">
                        <input type="text" id="tName" placeholder="Nama Transaksi" required style="flex:2">
                        <input type="number" id="tAmount" placeholder="Nominal (Rp)" required style="flex:1">
                    </div>
                    <div class="form-row">
                        <select id="tType" class="full" onchange="updateCategoryOptions()">
                            <option value="expense">Pengeluaran</option>
                            <option value="income">Pemasukan</option>
                        </select>
                        <select id="tCategory" class="full">
                            </select>
                    </div>
                    <button type="submit" class="btn-save">Simpan</button>
                </form>
            </div>

            <div class="box">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid #444; padding-bottom:10px;">
                    <h2 style="border:none; margin:0; color:var(--text-light);">üìù Riwayat</h2>
                    <button onclick="resetData()" style="font-size:0.7rem; padding:5px 8px; cursor:pointer; background:#5A5A88; color:white; border:none; border-radius:5px;">Reset Semua Data</button>
                </div>
                <ul id="trxList">
                    </ul>
            </div>
        </div>

        <div>
            <div class="box">
                <h2>üìâ Peta Keuangan (In & Out)</h2>
                



[Image of financial pie chart breakdown]


                <div class="chart-wrap">
                    <canvas id="financeChart"></canvas>
                </div>
                <div style="margin-top:15px; text-align:center; font-size:0.8rem; color:var(--text-muted);">
                    <span style="color:var(--success)">‚óè Pemasukan</span> | <span style="color:var(--danger)">‚óè Pengeluaran</span>
                </div>
            </div>
        </div>
    </div>
</div>

<footer style="color:var(--text-muted);">
    &copy; 2025. Dibuat oleh **Kelompok4KWU UNS**.
</footer>
<script>
    // --- 1. SETUP DATA & KONFIGURASI ---
    
    const incomeCats = ['Gaji', 'Bonus', 'Hasil Usaha', 'Investasi', 'Pemasukan Lain'];
    const expenseCats = ['Makanan', 'Transport', 'Belanja', 'Tagihan', 'Cicilan', 'Lainnya'];
    
    // Warna Chart disesuaikan untuk Dark Mode (warna cerah yang kontras)
    const incomeColors = ['#3DDC84', '#66FFB3', '#94FFC8', '#C2FFE0', '#E5FFEF']; 
    const expenseColors = ['#FF6B6B', '#FF8C8C', '#FFAFAF', '#FFD1D1', '#FFE0E0'];

    // Ambil data dari LocalStorage
    let transactions = [];

    // Setup Chart JS
    const ctx = document.getElementById('financeChart').getContext('2d');
    let myChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: [],
            datasets: [{
                data: [],
                backgroundColor: [],
                borderWidth: 2,
                borderColor: '#2C2C4E' /* Border chart menyesuaikan warna kartu */
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { 
                    position: 'bottom', 
                    labels: { 
                        boxWidth: 10, 
                        font: { size: 10 },
                        color: '#B0B0C4' /* Warna teks legenda */
                    } 
                }
            }
        }
    });

    const formatRupiah = (n) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(n);

    // --- 2. FUNGSI LOGIKA UTAMA ---

    function initApp() {
        transactions = JSON.parse(localStorage.getItem('fin_tracker_2025_v2')) || [];
        updateCategoryOptions(); 
        renderApp(); 
    }

    function renderApp() {
        const month = parseInt(document.getElementById('monthSelect').value);
        const dataBulanIni = transactions.filter(t => t.month === month);

        let totIn = 0, totOut = 0;
        const listEl = document.getElementById('trxList');
        listEl.innerHTML = '';

        let chartDataTracker = {};

        dataBulanIni.forEach(t => {
            if(t.type === 'income') totIn += t.amount;
            else totOut += t.amount;

            if (!chartDataTracker[t.category]) chartDataTracker[t.category] = { amount: 0, type: t.type };
            chartDataTracker[t.category].amount += t.amount;

            const li = document.createElement('li');
            const color = t.type === 'income' ? 'c-in' : 'c-out';
            const sign = t.type === 'income' ? '+' : '-';
            li.innerHTML = `
                <div class="li-left">
                    <h4>${t.name}</h4>
                    <span>${t.category}</span>
                </div>
                <div style="display:flex; align-items:center">
                    <strong class="${color}">${sign} ${formatRupiah(t.amount)}</strong>
                    <button class="btn-del" onclick="delTrx(${t.id})">X</button>
                </div>
            `;
            listEl.prepend(li);
        });

        if(dataBulanIni.length === 0) listEl.innerHTML = '<p style="text-align:center; color:#555; margin-top:20px">Belum ada data.</p>';

        document.getElementById('totalIncome').innerText = formatRupiah(totIn);
        document.getElementById('totalExpense').innerText = formatRupiah(totOut);
        document.getElementById('totalBalance').innerText = formatRupiah(totIn - totOut);

        updateChart(chartDataTracker);
    }

    function updateChart(dataTracker) {
        let labels = [];
        let data = [];
        let bgColors = [];

        incomeCats.forEach((cat, index) => {
            if(dataTracker[cat] && dataTracker[cat].amount > 0) {
                labels.push(cat);
                data.push(dataTracker[cat].amount);
                bgColors.push(incomeColors[index % incomeColors.length]);
            }
        });

        expenseCats.forEach((cat, index) => {
            if(dataTracker[cat] && dataTracker[cat].amount > 0) {
                labels.push(cat);
                data.push(dataTracker[cat].amount);
                bgColors.push(expenseColors[index % expenseColors.length]);
            }
        });

        if(data.length === 0) {
            myChart.data.labels = ['Kosong'];
            myChart.data.datasets[0].data = [1];
            myChart.data.datasets[0].backgroundColor = ['#444466']; 
        } else {
            myChart.data.labels = labels;
            myChart.data.datasets[0].data = data;
            myChart.data.datasets[0].backgroundColor = bgColors;
        }
        myChart.update();
    }

    // --- 3. FUNGSI INTERAKSI FORM ---
    
    function updateCategoryOptions() {
        const type = document.getElementById('tType').value;
        const catSelect = document.getElementById('tCategory');
        catSelect.innerHTML = ''; 

        let options = type === 'income' ? incomeCats : expenseCats;

        options.forEach(cat => {
            let opt = document.createElement('option');
            opt.value = cat;
            opt.innerText = cat;
            catSelect.appendChild(opt);
        });
    }

    function addTransaction(e) {
        e.preventDefault();
        const name = document.getElementById('tName').value;
        const amount = parseFloat(document.getElementById('tAmount').value);
        const type = document.getElementById('tType').value;
        const category = document.getElementById('tCategory').value;
        const month = parseInt(document.getElementById('monthSelect').value);

        if(name && amount) {
            transactions.push({
                id: Date.now(),
                name, amount, type, category, month
            });
            localStorage.setItem('fin_tracker_2025_v2', JSON.stringify(transactions));
            
            document.getElementById('tName').value = '';
            document.getElementById('tAmount').value = '';
            renderApp();
        }
    }

    function delTrx(id) {
        if(confirm('Hapus item ini?')) {
            transactions = transactions.filter(t => t.id !== id);
            localStorage.setItem('fin_tracker_2025_v2', JSON.stringify(transactions));
            renderApp();
        }
    }

    function resetData() {
        if(confirm('Hapus SEMUA data? Ini tidak dapat dikembalikan.')) {
            transactions = [];
            localStorage.setItem('fin_tracker_2025_v2', JSON.stringify([]));
            renderApp();
        }
    }

</script>

</body>
</html>